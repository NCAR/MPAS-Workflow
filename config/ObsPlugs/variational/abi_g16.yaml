- obs space:
    <<: *ObsSpace
    name: abi_g16
    obsdatain:
      obsfile: InDBDir/abi_g16_obs_2018041500.h5
    obsdataout:
      obsfile: OutDBDirOOPSMemberDir/obsPrefix_abi_g16.h5
    simulated variables: [brightness_temperature]
    channels: *abi_g16_channels
  obs error: *ObsErrorDiagonal
  obs operator:
    <<: *cloudyCRTMObsOperator
    obs options:
      <<: *CRTMObsOptions
      Sensor_ID: abi_g16
  get values:
    <<: *GetValues
  obs filters:
  - filter: Domain Check
    where:
    - variable:
        name: sensor_zenith_angle@MetaData
      maxvalue: 65.0
  - filter: Gaussian Thinning
    horizontal_mesh: RADTHINDISTANCE #km
  - filter: Perform Action
    apply at iterations: 0, 1, 2, 3, 4, 5
    filter variables: *errorAssignFilterVariables_abi_g16
#  - filter: Domain Check
#    where:
#    - variable:
#        name: cloud_area_fraction@MetaData
#      minvalue: 0.05
    action:
      name: assign error
      error function:
        # see seprate allSkyIR stubs
        <<: *ALLSKYERRORFUNCTIONNAMEAssignErrorFunction_abi_g16
  - filter: Background Check
    threshold: 3.0
    apply at iterations: 0, 1, 2, 3, 4, 5
  - filter: GOMsaver
    filename: OutDBDirOOPSMemberDir/geoPrefix_abi_g16.nc4
  - filter: YDIAGsaver
    filename: OutDBDirOOPSMemberDir/diagPrefix_abi_g16.nc4
    filter variables:
    - name: brightness_temperature_assuming_clear_sky
      channels: *abi_g16_channels
    - name: weightingfunction_of_atmosphere_layer
      channels: *abi_g16_channels
    - name: pressure_level_at_peak_of_weightingfunction
      channels: *abi_g16_channels
    - name: brightness_temperature_jacobian_air_temperature
      channels: *abi_g16_channels
    - name: brightness_temperature_jacobian_humidity_mixing_ratio
      channels: *abi_g16_channels
    - name: brightness_temperature_jacobian_surface_emissivity
      channels: *abi_g16_channels
    - name: brightness_temperature_jacobian_surface_temperature
      channels: *abi_g16_channels
