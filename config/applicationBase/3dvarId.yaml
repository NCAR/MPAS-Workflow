_iteration: &iterationConfig
  geometry:
    nml_file: InnerNamelistFile
    streams_file: InnerStreamsFile
    deallocate non-da fields: true
    interpolation type: unstructured
  gradient norm reduction: 1e-3
  obs perturbations: ObsPerturbations
ObsAnchors
output:
  filename: anStateDirOOPSMemberDir/anStatePrefix.$Y-$M-$D_$h.$m.$s.nc
  stream name: analysis
variational:
  minimizer:
VariationalMinimizer
  iterations:
VariationalIterations
final:
  diagnostics:
    # no need to write out analysis departures
    departures_: depan
cost function:
  cost type: 3D-Var
  window begin: 'WindowBegin'
  window length: PT6H
  geometry:
    nml_file: OuterNamelistFile
    streams_file: OuterStreamsFile
    deallocate non-da fields: true
    interpolation type: unstructured
  analysis variables: &incvars [AnalysisVariables]
  background:
    state variables: *incvars
    filename: bgStateDirOOPSMemberDir/bgStatePrefix.2018-04-15_00.00.00.nc
    date: &analysisDate '2018-04-15T00:00:00Z'
  background error:
    covariance model: SABER
    saber blocks:
    - saber block name: BUMP_NICAS
      saber central block: true
      iterative inverse: true
      input variables: &ctlvars
      - stream_function
      - velocity_potential
      - temperature
      - spechum
      - surface_pressure
      output variables: *ctlvars
      bump:
        datadir: /glade/scratch/bjung/pandac/20220111/bumpcov_tune
        prefix: mpas_parametersbump_cov
        strategy: specific_univariate
        load_nicas_local: true
        verbosity: main
    - saber block name: StdDev
      input variables: *ctlvars
      output variables: *ctlvars
      file:
        filename: /glade/scratch/bjung/pandac/20220111/bumpcov_tune/mpas.stddev.$Y-$M-$D_$h.$m.$s.nc
        date: *analysisDate
        stream name: control
    - saber block name: BUMP_VerticalBalance
      input variables: *ctlvars
      output variables: *ctlvars
      bump:
        datadir: /glade/scratch/bjung/pandac/20220111/bumpcov_tune
        prefix: mpas_vbal
        load_vbal: true
        #load_samp_global: true
        load_samp_local: true
        vbal_block:     [ true,  true,false, false,false,false,  true,false,false,false]
        vbal_diag_reg:  [ true, false,false, false,false,false, false,false,false,false]
        vbal_diag_auto: [false, false,false, false,false,false, false,false,false,false]
        verbosity: main
    linear variable change:
      linear variable change name: Control2Analysis
      input variables: *ctlvars
      output variables: *incvars    
  observations: 
