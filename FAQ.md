See my most recent PR that enables automated testing and easier user configuration of
experiments.  PR: https://github.com/NCAR/MPAS-Workflow/pull/69
 

FAQ for MPAS-Workflow
(March 2022) 


Q: What is the first global control script/chart?

A: drive.csh and ***.yaml

Q: How many files and how many levels of scripts do I need to modify to make the cycle run?

A: Please look under scenarios/base/*.yaml of feature/autotest_cases for most of the setting
   options available.  Eventually more settings will migrate to those yamls (like processor and
   node usage), but it is a large undertaking.
   https://github.com/NCAR/MPAS-Workflow/pull/69

Q: Which file sets up runtime directory layout, CPU, core-node usage?

A: See config/mpas/*/job.csh

Q: Which file sets up directory for executables?

A: builds.csh

Q: While keyword and file deal with first_initial_conditions (cold start vs. warm start)?

A: These are new options introduced by Ivette.  Either initialize from an offline MPAS
   forecast (only works for 2018 and 2020 experimental periods) or generate a cold start IC
   from GFS analysis (works any time).

Q: Which keyword and file generate B matrix (GENBE)?

A: None so far.  We only use static files generated by BJ.
   Currntly config/mpas/OIE120km/mesh.csh is the only mesh the static B works in the
   workflow.
   
Q: Which keyword and file control the experimental obs. namelist input and obs. input yaml?

A: See, for example,
   https://github.com/NCAR/MPAS-Workflow/blob/39283e656b9eccfe95518eda11fdafe50dbf125c/scenarios/base/variational.yaml#L67
   https://github.com/NCAR/MPAS-Workflow/blob/39283e656b9eccfe95518eda11fdafe50dbf125c/scenarios/base/hofx.yaml#L8

Q: Which keyword and file select HofX, 3denvar, 3dvar (CriticalPathType)?
A: See updated description of CriticalPathType in scenarios/base/workflow.yaml.
   variational.DAType in scenarios/*.yaml selects the DA algorithm.

Q: What are the common directories and files in pandac to look into if job fails when a new
   PR or observation comes in?
   [IC: B: Y0 : MAPS namelist, streams : First guess and maps-out]

A: to-be-answered (open-ended)

Q: Which files generate ensembles?

A: The forecast application generates an ensemble of forecasts when using eda_3denvar.
   Initial ensemble forecasts (first cycle) are generated offline only so far. See WRFDA.

Q: Can you provide a much simpler suite.rc, e.g., for 3denvar. This will be much easier to
   debug for other people to use.  For example,
   https://github.com/JCSDA-internal/ewok/blob/develop/simplecycle/suites/suite.rc

A: No. Not at this time.  That will require significant refactoring of the suite.rc file.
   That could come later if it becomes a priority for our group.  The scenario files at
   scenarios/*.yaml are as simple as it gets for now.

Q: How to modify yamls in general in the workflow?

A: Either via sed substitution in PrepJEDI.csh and PrepVariational.csh (for permanent
   changes to submitted as PRâ€™s) or manually under config/applicationBase/*.yaml and
   config/ObsPlugs/{{AppType}}/*.yaml.

Q: What is the difference between initialCyclePoint and FirstCycleDate?

A: It is necessary for the workflow to know whether the R1 cylc task is
   required to generate a background state for the DA.  See scenarios/base/workflow.yaml,
   then please comment on the PR so that I may clarify the comments in the yaml.

Q: Sometimes cycle fails to start when every OPTION is set to false. What are the
   interdependence options in drive.csh?

A: The Verify* options are not necessary to run a successful experiment. They are optional.
   You may set them all to False.
