enkf:
  job:
    defaults:
      baseSeconds: 1000
      secondsPerMember: 60
      nodesPer5Members: 2
      PEPerNode: 32
      memory: 109GB

      # cylc retry string
      retry: '2*PT30S'


    ## FORMAT
    #{{outerMesh}}:
    #  {{solver}}: # i.e., LETKF, GETKF
    #    baseSeconds: int
    #    secondsPerMember: int, default is 0
    #    #@ seconds = $secondsPerMember * members.n + $baseSeconds
    #    nodesPer5Members: int
    #    PEPerNode: int
    #    memory: int
    ## All resource requests below are based on
    # + single-precision bundle build
    # + sondes, aircraft, sfc, gnssro, satwind, 6 clear amsua
    # These are starting points.  When more memory is needed (e.g., more observations, more
    # memmbers) than is available in default resource requests below, use more nodes and/or
    # processors
    30km:
      observer:
        nodes: 4
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 100
        secondsPerMember: 20
      LETKF:
        nodes: 32
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 550
    60km:
      observer:
        # cost for record (20 members, PBS JOB email)
        # 2 x 32 PE : 3.3 min., 50.0 GB (single precision)
        nodes: 2
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 100
        secondsPerMember: 7
      LETKF:
        # cost for record (20 members, PBS JOB email, 3d iterator)
        # 16 x 32 PE : 83.6 min., 275 GB (single precision)
        # cost for record (20 members, PBS JOB email, 2d iterator)
        # 16 x 32 PE : 7.5 min., 274 GB (single precision)
        nodes: 16
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 290
      GETKF:
        # cost for record (20 members, PBS JOB email)
        # 16 x 32 PE : ?.? min., ??? GB (single precision)
        nodes: 16
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 30
    120km:
      observer:
        # cost for record (5 members, PBS JOB email)
        # 2 x 32 PE : 1.7 min., 14.6 GB (single precision)
        # 2 x 32 PE : 3.5 min., 31 GB (double precision)
        # cost for record (20 members, PBS JOB email)
        # 2 x 32 PE : 3.0 min., 31.7 GB (single precision)
        nodes: 3
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 100
        secondsPerMember: 3
      LETKF:
        # cost for record (5 members, PBS JOB email, 3d iterator)
        # 4 x 32 PE : > 40 min., 55 GB (single precision)
        # 8 x 32 PE : 22.0 min., 93 GB (single precision)
        # 8 x 32 PE : 22.5 min., 99 GB (double precision)
        # cost for record (20 members, PBS JOB email, 3d iterator)
        # 8 x 32 PE : 41.5 min., 131 GB (single precision)
        nodes: 8
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 150
      GETKF:
        # cost for record (5 members, PBS JOB email)
        # 4 x 32 PE : ?.? min., ?? GB (single precision)
        # 8 x 32 PE : ?.? min., ?? GB (single precision)
        nodes: 8
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 30
