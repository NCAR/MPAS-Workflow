enkf:
  job:
    defaults:
      baseSeconds: 1000
      secondsPerMember: 60
      nodesPer5Members: 2
      PEPerNode: 32
      memory: 109GB

      # cylc retry string
      retry: '2*PT30S'


    ## FORMAT
    #{{outerMesh}}:
    #  {{solver}}: # i.e., LETKF, GETKF
    #    baseSeconds: int
    #    secondsPerMember: int, default is 0
    #    #@ seconds = $secondsPerMember * members.n + $baseSeconds
    #    nodesPer5Members: int
    #    PEPerNode: int
    #    memory: int
    ## All resource requests below are based on
    # + single-precision bundle build
    # + sondes, aircraft, sfc, gnssro, satwind, 6 clear amsua
    # These are starting points.  When more memory is needed (e.g., more observations, more
    # memmbers) than is available in default resource requests below, use more nodes and/or
    # processors
    30km:
      observer:
        nodes: 4
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 1200
        secondsPerMember: 60
      LETKF:
        nodes: 16
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 300
    60km:
      observer:
        nodes: 2
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 1200
        secondsPerMember: 60
      LETKF:
        nodes: 16
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 300
    120km:
      observer:
        # cost for record (120km, 5 members, PBS JOB email)
        # 2 x 32 PE : 1.7 min., 14.6 GB (single precision)
        # 2 x 32 PE : 3.5 min., 31 GB (double precision)
        nodes: 2
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 100
        secondsPerMember: 40
      LETKF:
        # cost for record (120km, 5 members, PBS JOB email)
        # 4 x 32 PE : > 40 min., 55 GB (single precision)
        # 8 x 32 PE : ??.? min., ?? GB (single precision)
        # 8 x 32 PE : 22.5 min., 99 GB (double precision)
        nodes: 8
        PEPerNode: 32
        memory: 45GB
        baseSeconds: 200
        secondsPerMember: 270
