# settings borrowed from /glade/work/liuz/pandac_hybrid/amsua_clrsky
experiment:
  name: 'Hofx_MPAS-init_127L_gnssro'

firstbackground:
  resource: "PANDAC.GFS"

hofx:
  job:
      retry: '3*PT30S'
initic:
  job:
      retry: '2*PT30S'
verifymodel:
  job:
      retry: '3*PT30S'
verifyobs:
    defaults:
      retry: '3*PT30S'

forecast:
  execute: False # the default is True
  post: [verifyobs] # use this when doing extended forecast

externalanalyses:
  resource: "GFS.PANDAC"
  resources:
    GFS:
      PANDAC: # only available 20180418T00-20180524T00
        60km:
          directory: "/glade/derecho/scratch/taosun/pandac/60kmMeshGFS/MPAS_IC"
members:
  n: 1

model:
  outerMesh: 60km
  innerMesh: 60km
  ensembleMesh: 60km

observations:
  resource: PANDACArchiveForVarBC
  resources:
    PANDACArchiveForVarBC:
      IODADirectory:
        hofx:
          gnssrobndropp1d: /glade/campaign/mmm/parc/jban/pandac/GenerateObs2023/Observations
          gnssrorefncep: /glade/campaign/mmm/parc/jban/pandac/GenerateObs2023/Observations

variational:
  execute: False
  DAType: 3dhybrid-allsky
  biasCorrection: True
  nInnerIterations: [60,60,]
  ensemble:
    forecasts:
      resource: "PANDAC.EDA"
  post: []

hofx:
  observers: [
    gnssrobndropp1d,
    gnssrorefncep,
  ]
workflow:
  first cycle point: 20230703T18
  #restart cycle point: 20230704T06
  #final cycle point: 20180420T00
  final cycle point: 20230803T18
  CyclingWindowHR: 6 # default is 6 for cycling DA
  max active cycle points: 20 # used for independent 'extendedforecast'
hpc:
  CriticalQueue: economy
  NonCriticalQueue: economy
