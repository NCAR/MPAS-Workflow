workflow:
  # test a recent date
  firstCyclePoint: 20210120T00
  initialCyclePoint: 20210120T00
  finalCyclePoint: 20210120T00 #20210128T00
  CriticalPathType: HofxGNSSROFromExternalAnalyses
  VerifyEnsMeanBG: True
  maxActiveCyclePoints: 60
  ExtendedMeanFCTimes: T00,T06,T18
  ExtendedFCLengthHR: 6
  ExtendedFCOutIntervalHR: 6
observations:
  resource: AroObs
  convertToIODAObservations:
  - prepbufr
#  - gpsro
experiment:
  ExperimentName: '3dvar_O30kmIE60km_ARO_bndsioropp2d_HOFX_nhoriz31_ROobserror'
model:
  outerMesh: 30km
  innerMesh: 60km
  ensembleMesh: 60km
  # Need x1.655362.static.nc to include var2d, con, oa{1,2,3,4}, and ol{1,2,3,4} fields
  # alternatively could use /glade/work/liuz/pandac/prepare_mpas/mpas_static_30km/x1.655362.static.nc,
  # but no such file exists for 60km mesh.  This might skew comparisons to 30km GFS analyses produced
  # offline using /glade/work/liuz/pandac/prepare_mpas/mpas_static_30km/x1.655362.static.nc.  The
  # ultimate action item then is to look deeper into the x1.*.static.nc file generation process,
  # and determine if it is viable to bring into the workflow.  Ideally those files should be
  # generated using the same MPAS-A code version as is used in the initic and forecast applications.
  GraphInfoDir: /glade/work/duda/static_moved_to_campaign
firstbackground:
  resource: "ForecastFromAnalysis"
externalanalyses:
  resource: "GFS.RDA"
forecast:
  doDACycling: False
  deleteZerothForecast: False
  job:
    30km:
      # faster turnaround
      #nodes: 16
      #PEPerNode: 32
      #baseSeconds: 60
      #secondsPerForecastHR: 120
      # more efficient
      nodes: 4
      PEPerNode: 36
      baseSeconds: 60
      secondsPerForecastHR: 700
variational:
  DAType: 3dvar
  nInnerIterations: [0,]
  biasCorrection: False
  benchmarkObservations:
# anchor
#  - aircraft
#  - gnssroref
#  - gnssrobndropp1d
  - gnssrobndropp2d
#  - gnssarobndsioropp2d
#  - gnssrobndnbam
#  - satwind
#  - satwnd
#  - sfc
#  - sondes
  job:
    30km:
      60km:
        3dvar:
          nodes: 6
          PEPerNode: 32
          memory: 109
          baseSeconds: 900
          secondsPerEnVarMember: 9
hofx:
  observations:
#  - aircraft
#  - gnssroref
#  - gnssrobndropp1d
#  - gnssrobndropp2d
#  - gnssarobndsioropp2d
#  - gnssarobndsioropp2d_nrl
  - gnssarobndsioropp2d_ecmwf
#  - gnssrobndnbam
#  - satwind
#  - sfc
#  - sondes
job:
  CPAccountNumber: UCSD0041
  CPQueueName: premium
  NCPAccountNumber: UCSD0041
  NCPQueueName: premium
  EnsMeanBGAccountNumber: UCSD0041
  EnsMeanBGQueueName: premium
  SingleProcAccountNumber: UCSD0041
  SingleProcQueueName: premium
builds:
  commonBuild: /glade/p/mmm/parc/ivette/sio/codes-builds/internal/build_20230223_geopFromObs
  # /glade/p/mmm/parc/ivette/sio/codes-builds/internal/build_20230223
